import{a as T}from"./chunk-FIC5CLRE.js";import{a as E}from"./chunk-35AIUHS3.js";import{a as I}from"./chunk-GMT66XAW.js";import{a as x,b as P,e as D,g as W,h as j,i as F,j as O}from"./chunk-WDPTFP3C.js";import{d as w}from"./chunk-WSS6HYK2.js";import{b as M}from"./chunk-CNTZWMNJ.js";import{k as C,m as A}from"./chunk-5ONXG5PY.js";import{Ha as S,I as v,La as h,N as m,Ua as p,Va as i,Wa as r,ab as b,hb as a,jb as _,kb as y,lb as c,mb as g,nb as u,ta as s}from"./chunk-GRGODEBP.js";var f=class l{http=m(M);apiUrl=I.apiUrl+"/api/portfolios";getAll(){return this.http.get(this.apiUrl)}getById(e){return this.http.get(`${this.apiUrl}/${e}`)}getMine(){return this.http.get(`${this.apiUrl}/me`)}update(e){return this.http.put(`${this.apiUrl}/me`,e)}static \u0275fac=function(n){return new(n||l)};static \u0275prov=v({token:l,factory:l.\u0275fac,providedIn:"root"})};function U(l,e){if(l&1&&(i(0,"option",6),a(1),r()),l&2){let n=e.$implicit;p("ngValue",n.id),s(),y(" ",n.nombre," \u2014 ",n.especialidad," ")}}function V(l,e){if(l&1&&(i(0,"option",16),a(1),r()),l&2){let n=e.$implicit;p("value",n),s(),_(" ",n," ")}}var k=class l{appointmentService=m(T);authService=m(E);portfolioService=m(f);router=m(w);clientId;programadores=[];programmerId;fecha="";horario="";mensaje="";horariosDisponibles=["09:00","10:00","11:00","14:00","15:00"];ngOnInit(){window.scrollTo({top:0,behavior:"smooth"});let e=this.authService.getCurrentUser();if(!e){this.router.navigate(["/login"]);return}this.clientId=e.id,this.cargarProgramadores()}cargarProgramadores(){this.portfolioService.getAll().subscribe(e=>{this.programadores=e})}enviarSolicitud(){if(!this.programmerId||!this.fecha||!this.horario){alert("Debes completar todos los campos obligatorios");return}let e={programmerId:this.programmerId,clientId:this.clientId,date:this.fecha,time:this.horario,message:this.mensaje};this.appointmentService.create(e).subscribe({next:()=>{alert("Asesor\xEDa agendada correctamente"),this.router.navigate(["/"])},error:()=>{alert("Error al enviar la solicitud")}})}cancelar(){this.router.navigate(["/"])}static \u0275fac=function(n){return new(n||l)};static \u0275cmp=S({type:l,selectors:[["app-agendar-asesoria"]],decls:32,vars:7,consts:[[1,"max-w-3xl","mx-auto","mt-32","px-6"],[1,"text-4xl","font-bold","text-cyan-900","mb-8","text-center"],[1,"bg-white","rounded-3xl","shadow-xl","p-8","border","border-cyan-500"],[1,"mb-6"],[1,"font-semibold","block","mb-2"],[1,"select","select-bordered","w-full",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["type","date",1,"input","input-bordered","w-full",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"mb-8"],["rows","4","placeholder","Describe brevemente tu necesidad",1,"textarea","textarea-bordered","w-full",3,"ngModelChange","ngModel"],[1,"flex","justify-end","gap-4"],[1,"btn","btn-outline",3,"click"],[1,"btn","btn-primary",3,"click"],[3,"value"]],template:function(n,t){n&1&&(i(0,"section",0)(1,"h1",1),a(2," \u{1F4C5} Agendar Asesor\xEDa "),r(),i(3,"div",2)(4,"div",3)(5,"label",4),a(6," Programador "),r(),i(7,"select",5),u("ngModelChange",function(o){return g(t.programmerId,o)||(t.programmerId=o),o}),i(8,"option",6),a(9,"Seleccione un programador"),r(),h(10,U,2,3,"option",7),r()(),i(11,"div",3)(12,"label",4),a(13," Fecha "),r(),i(14,"input",8),u("ngModelChange",function(o){return g(t.fecha,o)||(t.fecha=o),o}),r()(),i(15,"div",3)(16,"label",4),a(17," Horario "),r(),i(18,"select",5),u("ngModelChange",function(o){return g(t.horario,o)||(t.horario=o),o}),i(19,"option",9),a(20,"Seleccione un horario"),r(),h(21,V,2,2,"option",10),r()(),i(22,"div",11)(23,"label",4),a(24," Mensaje (opcional) "),r(),i(25,"textarea",12),u("ngModelChange",function(o){return g(t.mensaje,o)||(t.mensaje=o),o}),a(26,"      "),r()(),i(27,"div",13)(28,"button",14),b("click",function(){return t.cancelar()}),a(29," Cancelar "),r(),i(30,"button",15),b("click",function(){return t.enviarSolicitud()}),a(31," Enviar Solicitud "),r()()()()),n&2&&(s(7),c("ngModel",t.programmerId),s(),p("ngValue",null),s(2),p("ngForOf",t.programadores),s(4),c("ngModel",t.fecha),s(4),c("ngModel",t.horario),s(3),p("ngForOf",t.horariosDisponibles),s(4),c("ngModel",t.mensaje))},dependencies:[A,C,O,j,F,x,W,P,D],encapsulation:2})};export{k as AgendarAsesoriaComponent};
